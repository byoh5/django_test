{% include "common/header.html" %}
{% load static %}

<div class="wrap">
    <!-- sub visual -->
    <section class="sub_visual">
        <div class="section_wrap">
            <div class="slogan">
                        <span class="bigSlg">
                            코딩키트
                        </span>
                <p>
                    <span class="brown">"크리에이티브 코딩키트"</span>로 배우는 런코딩!<br/>
                    지금 시작해보세요.
                </p>
            </div>
            <img class="subVisual codingKit" src="{% static 'resource/img/sub/sv_codingKit.png' %}" alt="코딩키트">
        </div>
    </section>
    <!-- sub visual -->

    <!-- codingKit list -->
    <div class="codingKit">
        <div class="filter_area fixed">
            <div>
                <input type="hidden" name="large_title" value="{{select_large}}">
                <span>
                    <img src="{% static 'resource/img/lecture_list/kit-title.jpg' %}" style="dispay:block; margin: 0px auto;" alt="강의 수">
                </span>
                <span style="float:left;" >
                    <a  class="btn_kit" href="javascript:void(0);" onclick="javascript:goSearchLarge('mblock');">&nbsp;
                        <img id="mblock" src="{% static 'resource/img/lecture_list/mblock_off.jpg' %}" onmouseout="this.src='{% static 'resource/img/lecture_list/mblock_off.jpg' %}'" onmouseover="this.src='{% static 'resource/img/lecture_list/mblock_on.jpg' %}'" alt="강의 수">
                    </a>
                </span>
                <span>
                    <a  class="btn_kit" href="javascript:void(0);" onclick="javascript:goSearchLarge('arduino');">&nbsp;
                        <img id="arduino" src="{% static 'resource/img/lecture_list/arduino_off.jpg' %}" onmouseout="this.src='{% static 'resource/img/lecture_list/arduino_off.jpg' %}'" onmouseover="this.src='{% static 'resource/img/lecture_list/arduino_on.jpg' %}'" alt="강의 수">
                    </a>
                </span>
            </div>
            <div class="fixedArea">
                <div class="search_area">
                    <div class="input_area_kit">
                        <form id="search_form" method="post" action="/search/">
                            {% csrf_token %}
                            <input type="text" name="src_inp"  id="src_inp" placeholder="검색어 입력해주세요.">
                            <input type="hidden" name="large"  id="large" placeholder="검색어 입력">
                        </form>
                        &nbsp;<button type="button" onclick="javascript:goSearch();"  style="width:40px; height:40px; margin-top:2px;">
                            <img src="{% static 'resource/img/sub/ico_search.png' %}" alt="검색" title="검색어 없으면 전체검색">
                            </button>
                    </div>
                </div>
            </div>
         </div>
         <form id="class_form" method="POST" action="/class_detail/">
            {% csrf_token %}
            <input type="hidden" id="detail_prd_code" name="detail_prd_code" value="">
        </form>
        <div class="lecture_list">
            <ul>
                 {% for classList_detail in class_list_detail %}
                <li>
                    <input type="hidden" name="idxs[]" value={{forloop.counter0}} >
                    <div class="content">
                        <a href="javascript:void(0);" onclick="javascript:goClassDetail({{classList_detail.prd_code}});">
                            <img src={{classList_detail.prd_list_img}} alt="코딩키트 썸네일" >
                        </a>
                    </div>

                    <div class="text_area">
                        <span>
                            {{classList_detail.title}}
                        </span>
                        <span id="price_{{forloop.counter0}}">
                            {{classList_detail.price}}
                        </span>
                        <div class="ckInfo">
                            <span class="period">
                                <img src="{% static 'resource/img/sub/ico_calendar.png' %}" alt="기간">
                                {{classList_detail.period}}개월 과정
                            </span>
                            <span class="num">
                                <img src="{% static 'resource/img/sub/ico_play.png' %}" alt="강의 수">
                                {{classList_detail.class_count}}개 강의
                            </span>

                        </div>
                        <div class="ckInfo">
                            <span style="margin-top:-30px;">
                                <img src="{% static 'resource/img/sub/ico_what.png' %}" style="width:20px; height:20px;" alt="강의 수">
                                {{classList_detail.category_sub}}
                            </span>
                        </div>
                    </div>
                </li>
                {% endfor%}
            </ul>
        </div>
    </div>

    {% include "common/banner_bottom.html" %}
    {% include "common/footer.html" %}
</div>

<script>

    function numberWithCommas(x)
    {
       return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    $(document).ready(function() {
        var category_lar = document.getElementById("category_lar");
        var total_count = '{{total_count}}';

        for(var i = 0; i < total_count; i++)
        {
            var price_name = "price_" + i;
            var prd_price =  document.getElementById(price_name).innerText;
            document.getElementById(price_name).innerHTML = "<span>" + numberWithCommas(prd_price) + "원</span>";
        }

        var large =  '{{current_category_large}}';

        if(large == -1 )
           large = 0;

        var large_title = $("input[type=hidden][name=large_title]").val();
        if(large_title != null)
        {
            var src = '/static/resource/img/lecture_list/' + large_title + '_on.jpg';
            var btn  = document.getElementById(large_title);
            btn.src = src;
            btn.onmouseout = src;
        }
    });

    function goClassDetail(prdCode)
    {
        $("input[type=hidden][name=detail_prd_code]").val(prdCode);
        document.getElementById('class_form').submit();
    }

    function goSearchLarge(keyword)
    {
        $("input[type=hidden][name=large]").val(keyword);
        goSearch();
    }


    function goSearch()
    {
        document.getElementById('search_form').submit();
    }

</script>



</body>
</html>
